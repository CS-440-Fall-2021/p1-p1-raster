<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=UT-8">
    <title>Flight Simulator</title>
    <style>
        /* make the canvas fill its container */
        #gl-canvas {
            width: 50%;
            height: 50%;
            /* display: block; */
            /* background-color: black; */
        }
    </style>

    <script id="vertex-shader" type="x-shader/x-vertex">
        #version 300 es

        in vec4 vPosition;  // attribute
        in vec3 vColor;  // attribute
        out vec4 vtxColor;
        //uniform mat4 uTransformMatrix;
        uniform mat4 modelViewMatrix;
        uniform mat4 projectionMatrix;
        uniform mat4 vpMatrix;

        uniform int xmin;
        uniform int xmax;

        uniform int zmin;
        uniform int zmax;

        uniform int ymax;

        float map_vertex(float vertex_coord, float min, float max, float map_min, float map_max)
        {
            float alpha = (vertex_coord - min) / (max - min);
            
            return (alpha * map_max) + ((1.0 - alpha) * map_min);
        }

        void main()
        {
            float c = cos(1.0);                         
            float s = sin(1.0);
            mat3 rotation = mat3(1,  0,  0,
            0,  c,  -s,
            0, s,  c); 
            
            

            vec4 vector_pos = vec4(map_vertex(vPosition[0], float(xmin), float(xmax), -1.0, 1.0), 
                            (map_vertex(vPosition[1], 0.0, float(ymax), 0.0, 0.5)), 
                            map_vertex(vPosition[2], float(zmin), float(zmax), -1.0, 1.0), 
                            vPosition[3]);
            
            gl_Position = projectionMatrix*modelViewMatrix*vector_pos; // vertex position in CAMERA COORDINATES
            //gl_Position = vec4(vector_pos.xyz * rotation, 1); // vertex position in CAMERA COORDINATES

            gl_PointSize = 2.0;

            //vtxColor = vec4(vColor, 1.0);

            if (vector_pos[1] < 0.00) {
                //blue
                vtxColor = vec4(0.18039, 0.22353, 0.55686, 1);
              } else if (0.0 < vector_pos[1] && vector_pos[1] < 0.06) {
                //brown
                vtxColor = vec4(0.24, 0.15, 0.08, 1);
              } else if (vector_pos[1] > 0.18) {
                //white
                vtxColor = vec4(1.0, 1.0, 1.0, 1);
              } else {
                vtxColor = vec4(0.14, 0.56, 0.31, 1);
              }
        }
    </script>

    <script id="fragment-shader" type="x-shader/x-fragment">
        #version 300 es
        precision highp float;  // lowp, mediump

        in vec4 vtxColor;
        out vec4 fragColor;
        

        void main()
        {
            fragColor = vtxColor;
        }
    </script>

    <script src="http://interactivecomputergraphics.com/8E/Code%20update/Common/initShadersES6.js"></script>
    <script src="http://interactivecomputergraphics.com/8E/Code%20update/Common/MVES6.js"></script>
    <!-- <script src="p5.js"></script> -->
    <script type="text/javascript" src="perlin.js"></script>
    <script type="text/javascript" src="index.js"></script>
    <script type="text/javascript" src="eventhandler.js"></script>
    <script type="text/javascript" src="helper.js"></script>

</head>

<body>

    <h1>Flight Simulator</h1>
    <h1 id="mode" style="margin-bottom: 0;"></h1>
    <br>

    <canvas id="gl-canvas" width="600" height="600" style="border:1px solid #000000;">
        Oops ... your browser doesn't support the HTML5 canvas element
    </canvas>
    <br>


</body>

</html>